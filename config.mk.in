INCLUDED_CONFIG_MK = 1

MKI_VERSION	= @VERSION@
GLOBAL_PREFIX	?= @PREFIXDIR@
CONFIGDIR 	?= $(GLOBAL_PREFIX)
TOOLSDIR 	?= $(GLOBAL_PREFIX)/tools

include		$(CONFIGDIR)/tools.mk

WORKDIRNAME	= .work
OUTDIRNAME	= .out
CACHEDIRNAME	= .cache

TOPDIR 		?= $(CURDIR)
OUTDIR		?= $(WORKDIR)/$(OUTDIRNAME)

MYMAKEFILE 	= $(CURDIR)/Makefile
WORKDIR 	= $(CURDIR)/$(WORKDIRNAME)
CACHEDIR	= $(WORKDIR)/$(CACHEDIRNAME)
PKGBOX		= $(WORKDIR)/pkgbox

PROFILE		?=
SUBDIRS		?=
CLEANUP_OUTDIR	?= 1

GLOBAL_TARGET	?=
TARGET		= $(GLOBAL_TARGET)
ifeq ($(shell uname -m),x86_64)
    TARGET ?= $(shell uname -m)
else
    TARGET ?= i586
endif

GLOBAL_QUIET ?=
QUIET = $(GLOBAL_QUIET)

GLOBAL_VERBOSE	?=
ifdef GLOBAL_QUIET
    GLOBAL_VERBOSE =
endif
VERBOSE = $(GLOBAL_VERBOSE)

HSH_CACHEDIR = $(CACHEDIR)/hsh

GLOBAL_HSH_NUMBER ?=
HSH_NUMBER = $(GLOBAL_HSH_NUMBER)

GLOBAL_HSH_APT_CONFIG ?=
HSH_APT_CONFIG = $(GLOBAL_HSH_APT_CONFIG)

GLOBAL_HSH_APT_PREFIX ?=
HSH_APT_PREFIX = $(GLOBAL_HSH_APT_PREFIX)

GLOBAL_HSH_USE_QEMU ?=
HSH_USE_QEMU = $(GLOBAL_HSH_USE_QEMU)

GLOBAL_HSH_LANGS ?=
HSH_LANGS = $(GLOBAL_HSH_LANGS)

NO_CACHE =

MKI_SCRIPTDIR = $(CURDIR)/scripts.d
MKI_IMAGE_SCRIPTDIR = $(CURDIR)/image-scripts.d

CHROOT_PACKAGES =
CHROOT_PACKAGES_REGEXP =

IMAGE_PACKAGES =
IMAGE_PACKAGES_REGEXP =

MKI_DESTDIR =
COPY_TREE =

MKI_PACK_RESULTS ?=
MKI_PACKTYPE =
MKI_OUTNAME ?=

MKI_IMAGESUBDIR =
MKI_COMPRESSTYPE =

PACK_SQUASHFS_PROCESSORS ?= $(shell $(COUNT_CPU))

MKI_SPLIT =
MKI_SPLITTYPE =

PROPAGATOR_MAR_MODULES =
PROPAGATOR_INITFS =
PROPAGATOR_VERSION =
BOOT_TYPE =

BOOT_APPI =
BOOT_COPY =
BOOT_ABST =
BOOT_BIBL =
BOOT_PREP =
BOOT_PUBL =
BOOT_SYSI =
BOOT_VOLI =
BOOT_VOLS =

all: __profile_internal_rule
